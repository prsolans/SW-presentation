cmsdefine(["Underscore"],function(){var n=window.top,i=window._,t,r=function(t){var r={},i={},s=1,u=function(n){return t.flatten(n,!0)},h=function(n){return t.toArray(n.parent.frames).indexOf(n)},c=function(f,e,o,s){var c,h;(t.isString(e)||(c=e,e=c.name),r[e]=r[e]||{},i[e]=i[e]||{},e&&o)&&(s=s||n,i[e][f]=i[e][f]||[],i[e][f].push({cb:o,ctx:s}),h=t.compose(u,t.toArray)(r[e]),h&&t.each(h,function(n){o.apply(s,n)}))},l=function(n,r,u){var s,f,e,o,h;t.isString(r)||(s=r,r=s.name);f=i[r]=i[r]||{};for(e in f)if(f.hasOwnProperty(e))for(o=0,h=f[e].length;o<h;o++)if(f[e][o].cb===u){f[e].splice(o,1);return}},a=function(n,t,i,r){for(var e=!0,u=n.length-1,f;e&&u>=0;)try{while(e&&u>=0)f=n[u],r&&!r.apply(f.ctx,t)?e=!1:f.cb.apply(f.ctx,t),u--}catch(o){console&&console.log&&console.error('Event "'+i+'" fired an error:\n'+o+"\n"+o.stack);u--}},v=function(){var e=t.toArray(arguments),c=e[0],n=e[1],l=e.slice(2),o,h,f,v=null,y=!1;t.isString(n)||(f=n,n=f.name,v=f.checkContinue,y=f.onlySubscribed);r[n]=r[n]||{};i[n]=i[n]||{};y||(o=r[n][c]||[],o.unshift(l),r[n][c]=o.slice(0,s));h=t.compose(u,t.toArray)(i[n]);h&&a(h,l,n,v)},f=function(n,t,i){n.CMS=n.CMS||{};n.parent.CMS=n.parent.CMS||{};var r,u,e,s,c,l;return n.parent===n.self?(r=n.CMS.windowId,r||(r="0_0",t.push.apply(t,o(r)))):(r=n.CMS.windowId,u=n.parent.CMS.windowId,r||(u||(u=f(n.parent,t,!0)),e=u.split("|").pop().split("_"),s=e[0],c=parseInt(s,10)+1,l=h(n),r=u+"|"+c+"_"+l,i?t.push(r):t.push.apply(t,o(r)))),n.CMS.windowId=r,r},e=function(n,i){var r;t(n).each(function(n){for(r=i.length-1;r>=0;r--)delete n[i[r]]})},y=function(u,o){return function(){var s=t.toArray(arguments),c,l=s[0],h=[],a;t.isString(l)||(c=l,l=c.name,u=c.window||u);a=f(u,h,!1);h.length>0&&(e(r,h),e(i,h));s.push(u);s.unshift(a);o.apply(n.CMS.GlobalEventHub,s)}},o=function(n){return t(t(r).values().concat(t(i).values())).chain().map(t.keys).flatten().uniq().filter(function(t){return t.indexOf(n)===0}).value()};return{subscribe:c,unsubscribe:l,publish:v,generateLocalEventHubMethod:y}};return n.CMS=n.CMS||{},n.CMS.GlobalEventHub||(n.CMS.GlobalEventHub=r(i)),t=n.CMS.GlobalEventHub,{publish:t.generateLocalEventHubMethod(window,t.publish),subscribe:t.generateLocalEventHubMethod(window,t.subscribe),unsubscribe:t.generateLocalEventHubMethod(window,t.unsubscribe)}})